<!--#set var="revision" value="\$Id: devel.html,v 1.10.2.9 2003-12-17 05:44:00 ot Exp $"
--><!--#set var="date" value="\$Date: 2003-12-17 05:44:00 $"
--><!--#set var="title" value="Developer Documentation for The W3C Markup Validation Service"
--><!--#set var="relroot" value="../"
--><!--#include virtual="../header.html" -->

<div class="doc">
<h2>Installation and development information <br />for the W3C Markup Validator</h2>

<h3 id="TableOfContents">Table of Contents</h3>

    <div id="toc">
      <ul>
        <li><a href="#prereq">Prerequisites</a></li>
        <li><a href="#config">Configuration Files</a></li>
        <li><a href="#install">Installation Guide</a>
          <ul>
            <li><a href="#install-package">Packaged systems</a></li>
            <li><a href="#install-fromsource">Install from source</a></li>
          </ul>
        </li>
        <li><a href="#todo">TODO</a></li>
        <li><a href="#bugzilla">Bugs and Issue Tracking</a></li>
      </ul>
    </div>
    
    <p id="skip">
      The W3C Markup Validation Service consists of an SGML Parser, an SGML
      catalog, a CGI program and it's configuration files. In addition it
      relies on a moderately large set of Perl modules for it's operation.
    </p>
    <p>
      This document tries to draw a road map of the prerequisites and what the
      different parts of the system do. It is intended for system
      administrators and people interested in helping developing the validator.
      This is not end user documentation. See the
      <a href="users.html">User Manual</a> for usage instructions.
    </p>

    <div id="prereq" class="stb">
      <h3>Prerequisites</h3>
      <p>
        Apart from a properly configured web server, the Validator needs a
        SGML parser -- that does all the hard work -- and several Perl
        modules used by the "check" CGI script.
      </p>
      <p>
        The SGML parser we're currently using is <code>OpenSP 1.5</code>,
        which can be found on the
        <a href="http://openjade.sourceforge.net/">OpenJade home page</a>.
      </p>
      <p>
        The canonical list of Perl modules we use can be found in the source
        for the "check" CGI script. There is a bunch of lines that of the form
        "use Foo::Bar" where each "Foo::Bar" represents a module. Most modules
        can be found on <a href="http://www.cpan.org/">CPAN</a> (minimum
        versions in parenthesis after the name). The following
        list was complete when CVS spit out:
        <code>$Date: 2003-12-17 05:44:00 $</code>. <tt>:-)</tt>
      </p>
      <dl>
        <dt><code>CGI (2.81)</code></dt>
        <dd>
          The all-singing, all-dancing,
          everything-<em>and</em>-the-kitchen-sink, Perl CGI library. This
          takes care of all those niggly little bits of CGI for us and make
          options parsing and file upload a breeze.
        </dd>
        <dt><code>CGI::Carp</code></dt>
        <dd>CGI-aware warn()/die()</dd>
        <dt><code>File::Spec</code></dt><dd>Portable filespecs.</dd>
        <dt><code>HTML::Parser (3.25)</code></dt>
        <dd>Minimal HTML Parser used for preparse and finding metadata.</dd>
        <dt><code>LWP::UserAgent (1.90)</code></dt>
        <dd>
          Gisle Aas' most excellent WWW library for Perl. This is where our
          support for downloading pages off the net comes from.
        </dd>
        <dt><code>Set::IntSpan</code></dt><dd>Efficient Set operations.</dd>
        <dt><code>Text::Iconv</code></dt>
        <dd>
          Perl-native interface to the (g)libc iconv(3) library. Handles
          charset conversion issues.
        </dd>
        <dt><code>Text::Wrap</code></dt>
        <dd>Wrap text to a sane width. Needed for source output in results.</dd>
        <dt><code>URI::Escape</code></dt>
        <dd>Module to handle escaping special characters in URIs.</dd>
      </dl>
    </div>
    <div id="config" class="stb">
      <h3>Configuration Files</h3>
      <p>
        The validator uses a number of configuration files -- most of which
        are really mapping tables of some form -- to avoid having to check in
        a new version of the code every time a new version of HTML comes out.
        All configuration files can be found in
        <code>$CVSROOT/validator/htdocs/config/</code>.
      </p>
      <p>
        To really understand what each does you should read the source, but
        here is a short description to get you started.
      </p>
      <dl>
        <dt>eref.cfg</dt>
        <dd>
          Contains the mappings from element names to an URI fragment
          (relative to a configurable URI) for their definitions. Used
          in output when the "Show Source Input" option is enabled.
        </dd>
        <dt>fpis.cfg</dt>
        <dd>
          Maps FPIs to plain text version strings.
        </dd>
        <dt>frag.cfg</dt>
        <dd>
          Maps error messages to an URI fragment identifier where an
          explanation of that error can be found.
        </dd>
        <dt>type.cfg</dt>
        <dd>
          Maps MIME/HTTP Content-Types to an internal "document type" which
          is used for treating HTML, XML, and XHTML in different ways.
        </dd>
        <dt>validator.conf</dt>
        <dd>
          Main configuration file. Gives various parameters (such as the
          address of the maintainer and the URL for the "Home Page") and
          the locations of the other configuration files and mapping tables.
        </dd>
       </dl>
    </div>
    <div id="install" class="stb">
    <h3>Installation Guide</h3>
    <p>In addition to being an online service at W3C, the Markup Validator is 
    also fully available and it can be installed on your own Web server. This can
    be useful if you want to provide an internal validation service (for an intranet 
    or critical, confidential material) or if you want to test and help develop this 
    service.</p> 
    
    <p>The Validator Team wishes to thank Nick Talbott and Stephen Yoch for their help
    in creating the following installation instructions. Please note that these are 
    generic instructions, other platform-specific guides are also available:</p>
    <ul>
        <li><a href="http://www.mediaville.net/articles/validator/">Mac OSX and OSX Server</a>
        by Stephen Yoch,</li>
        <li><a href="http://lists.w3.org/Archives/Public/www-validator/2003Dec/0023.html">Linux (Slackware)</a>
        by Nick Talbot</li>
    </ul>
    
    <h4 id="install-package">Packaged systems</h4>
    
    <p>The easiest way to install released versions of the Markup Validator is to use the packages created
    for some platforms by contributors: Debian GNU/Linux and Linux Redhat packages are 
    <a href="../source/">available</a> .</p>
    
    <h4 id="install-fromsource">Install from source</h4>
    <p>These instructions are strongly inspired from Nick Talbott's guide for Linux Slackware. Thanks Nick!</p>
    <h5>Download</h5>
        <p>Download the <a href="http://validator.w3.org/validator.tar.gz">Validator's Tar Ball</a>
        and the <a href="http://validator.w3.org/sgml-lib.tar.gz">DTD library</a> from our site.</p>
        <p>Alternatively, if you want to work on the latest development version, you can download 
        both from our CVs repository, but you should be aware that this version may not work at all.</p>
        <p>(<a href="../source/">Read more</a> about retrieving the source)</p>


    <h5>Install the various necessary components:</h5>
        <ol>
            <li><p>The installation guide assumes that you have a working Web server. We suggest
            the popular Apache server, which is used for the W3C Markup Validation service. 
            The validator may work with other Web servers than the popular Apache, but
            we can not guarantee that it will. You will also need a working installation 
            of the Perl language (standard on most Web servers).</p></li>
                
            <li><p>Proceed with the  <a href="#prereq">Prerequisites</a> : Install openSP and 
            the listed Perl libraries. This can be made by using your Operating System's packaging 
            mechanism, the CPAN installation mechanism, or simply download the modules and follow 
            their embedded installation instructions.</p></li>
                
            <li><p>Create a directory for the validator's installation. On Unix-based systems, 
            the default will be <code>/usr/local/validator</code>.This directory
            will be referred as [validatorpath]  throughout this guide.</p></li>
                
            <li><p>Unpack the archives of the validator and DTD library into <code>[validatorpath]</code></p>
            <p>The <code>[validatorpath]</code> directory should now have subdirectories named 
            <code>htdocs</code>, <code>httpd</code>, <code>config</code> and <code>sgml-lib</code> 
            (if you used CVS, the latter is actually in the <code>htdocs</code> subdirectory, 
            but that is not really important).</p></li>
        </ol>
    <h5>Configure</h5>
        <ol>
            <li><p>Edit the configuration of your Web server to refer to the specific configuration file
            for the Validation service.</p>
            <p>With apache, this can be done by adding this line:</p>
            <pre>Include [validatorpath]/httpd/conf/validator-httpd.conf</pre>
            </li>

            <li><p>Copy <code>[validatorpath]/httpd/conf/httpd.conf</code> to 
            <code>[validatorpath]/httpd/conf/validator-httpd.conf</code> and start 
            editing this file.</p></li>
            
            <li><p>You may want to set up a "virtual server" for the service. This can be done
            by adding something similar to the following:</p>
<pre>&lt;VirtualHost 127.0.0.1&gt;                                                               
	DocumentRoot [validatorpath]/htdocs/                        
	ServerName validator.example.org
&lt;/VirtualHost&gt;</pre>
            <p><strong>AND/OR</strong> you may want to have the service at a specific location
            on your Web server, which can be configured as follows:</p>
            <pre>Alias /validator/ [validatorpath]/htdocs/</pre>
            </li>
                
            <li><p>Finish editing this HTTP server configuration file, adapting 
            all the directory references to reflect the paths used in your installation.</p></li>
                
            <li><p>Now restart the web server to activate the updated configuration. For Apache
            this is done by typing into a shell, as System Administrator: 
            <code>apachectl graceful</code> (or, for older versions of Apache 
            <code>apachectl configtest</code> then <code>apachectl restart</code>)</p></li>
            
            <li><p>Create the directory <code>/etc/w3c</code> and create a file called 
            <code>validator.conf</code> using the file 
            <code>[validatorpath]/htdocs/config/check.cfg</code> as template.  
            This file is well commented.  Make changes to reflect where files are in your installation.</p>
            </li>
    </ol>
    <h5>Check the installation</h5>
    <ol>
        <li><p>Point your browser at the new site.</p></li> 
        <li><p>Check the error log of the webserver to get clues on what may be wrong 
        if you get any server errors.</p></li>
   </ol>

    <p><strong>Help us</strong> improve this installation guide by sending us your feedback
    if you install the validator on your local system!</p>

    </div>
    
    <div id="todo" class="stb">
      <h3>TODO</h3>
      <p>
        The TODO list for the Validator is online at
        &lt;<a href="../todo.html">http://validator.w3.org/todo.html</a>&gt;.
 	      This is probably the best place to start.
 	    </p>
      <p>
        However this list is by no means comprehensive. Feel free to suggest
        other features that should be on this list or send patches for your
        favourite feature.
      </p>
      <p>
        Keep in mind that features should be of general utility and that the
        point if the validator is that it does an <em>objective</em>
        validation instead of just what some random developer happens to
        think is a Good Idea&reg;. While extra features are nice, they
        shouldn't dilute the value of the validator as an objective check.
      </p>
    </div>
    <div id="bugzilla" class="stb">
      <h3>Bugs and Issue Tracking</h3>
      <p>
        Bug and Issue Tracking for the Validator happens in the <a
          href="http://www.w3.org/Bugs/Public/">W3C Public Bugzilla</a>
        instance. Developers should feel free to set up an account
        and report bugs, enhancement requests, patches, etc. directly there
        (end users should continue to send stuff to the mailinglist).
      </p>
    </div>
</div>
<!--#include virtual="../footer.html" -->
  </body>
</html>
